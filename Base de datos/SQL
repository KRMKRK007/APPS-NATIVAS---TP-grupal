CREATE TABLE Usuario(
    ID_Usuario INT PRIMARY KEY,
    Username VARCHAR(50) UNIQUE NOT NULL,
    Password VARCHAR(100) NOT NULL,
    Fecha_Registro DATE NOT NULL
);

CREATE TABLE Cliente (
    ID_Cliente INT PRIMARY KEY,
    Nombre VARCHAR(50),
    Apellido VARCHAR(50),
    Email VARCHAR(100) UNIQUE,
    Telefono VARCHAR(20),
    ID_Usuario INT,
    FOREIGN KEY (ID_Usuario) REFERENCES Usuario(ID_Usuario)
);

CREATE TABLE Direccion (
    ID_Direccion INT PRIMARY KEY,
    ID_Cliente INT,
    Calle VARCHAR(100),
    Numero VARCHAR(10),
    Ciudad VARCHAR(50),
    Provincia VARCHAR(50),
    Codigo_Postal VARCHAR(10),
    FOREIGN KEY (ID_Cliente) REFERENCES Cliente(ID_Cliente)
);

CREATE TABLE MedioPago (
    ID_MedioPago INT PRIMARY KEY,
    ID_Cliente INT,
    Tipo VARCHAR(30),  
    Numero_Enmascarado VARCHAR(20),
    Vencimiento DATE,
    FOREIGN KEY (ID_Cliente) REFERENCES Cliente(ID_Cliente)
);

CREATE TABLE Categoria (
    ID_Categoria INT PRIMARY KEY,
    Nombre VARCHAR(50)  
);

CREATE TABLE Producto (
    ID_Producto INT PRIMARY KEY,
    Nombre VARCHAR(100),
    Descripcion TEXT,
    Precio DECIMAL(10,2),
    ID_Categoria INT,
    FOREIGN KEY (ID_Categoria) REFERENCES Categoria(ID_Categoria)
);

CREATE TABLE Pedido (
    ID_Pedido INT PRIMARY KEY,
    ID_Cliente INT,
    Fecha TIMESTAMP,
    Estado VARCHAR(20), 
    Nota_Personalizada TEXT,
    Horario_Entrega TIME,
    Agradecimiento TEXT,
    FOREIGN KEY (ID_Cliente) REFERENCES Cliente(ID_Cliente)
);

CREATE TABLE Carrito (
    ID_Carrito INT PRIMARY KEY,
    ID_Cliente INT,
    Fecha_Creacion TIMESTAMP,
    FOREIGN KEY (ID_Cliente) REFERENCES Cliente(ID_Cliente)
);

CREATE TABLE Atencion_Cliente (
    ID_Caso INT PRIMARY KEY,
    ID_Cliente INT,
    Tipo VARCHAR(30), 
    Descripcion TEXT,
    Estado VARCHAR(20), 
    Resolucion TEXT, 
    Fecha TIMESTAMP,
    FOREIGN KEY (ID_Cliente) REFERENCES Cliente(ID_Cliente)
);


CREATE TABLE Detalle_Pedido (
    ID_Detalle INT PRIMARY KEY,
    ID_Pedido INT,
    ID_Producto INT,
    Cantidad INT,
    Precio_Unitario DECIMAL(10,2),
    FOREIGN KEY (ID_Pedido) REFERENCES Pedido(ID_Pedido),
    FOREIGN KEY (ID_Producto) REFERENCES Producto(ID_Producto)
);

CREATE TABLE Detalle_Carrito (
    ID_DetalleCarrito INT PRIMARY KEY,
    ID_Carrito INT,
    ID_Producto INT,
    Cantidad INT,
    Precio_Unitario DECIMAL(10,2), 
    FOREIGN KEY (ID_Carrito) REFERENCES Carrito(ID_Carrito),
    FOREIGN KEY (ID_Producto) REFERENCES Producto(ID_Producto)
);